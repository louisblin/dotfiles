#!/Users/louisblin/.pyenv/shims/python
import os
import argparse
import requests

parser = argparse.ArgumentParser(description='Lists IC French members')

url = 'https://eactivities.union.ic.ac.uk/API/CSP/307/reports/members?year=17-18'
headers = {'X-API-Key': '94A32349-B86D-4104-90A1-DEF7BC487FA2'}

r = requests.get(url, headers=headers)
members = r.json()

for m in sorted(members, key=lambda m: m.get('Login')):
    print('{Login} - {FirstName} {Surname}'.format(**m))

print('>>> # members : {}.'.format(len(members)))
